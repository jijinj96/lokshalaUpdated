<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login Form</title>
<script src="js/index.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/style.css">
<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
</head>
<body>
	<form class="login" action="" method="post">
		<fieldset>
			<legend class="legend">Login</legend>
			<div class="input">
				<input type="email" placeholder="Email" id="email" class="email"
					required /> <span><i class="fa fa-envelope-o"></i></span>
			</div>
			<div class="input">
				<input type="password" placeholder="Password" id="password"
					class="password" required /> <span><i class="fa fa-lock"></i></span>
			</div>
			<button type="submit" class="submit" id="login">
				<i class="fa fa-long-arrow-right"></i>
			</button>
	</form>

	</fieldset>


	<div class="feedback">
		login successful <br /> redirecting...
	</div>

	</form>
	<script
		src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

	<script src="js/index.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>



	<script type="text/javascript">
		$("#login")
				.click(function(){
							$.ajax({
										url : 'SmcLoginServlet',
										type : 'POST',
										dataType : 'json',
										//data: $form.serialize(),
										data : JSON.stringify({
											"action"   : 'login',
											"username" : $('#email').val(),
											"password" : $('#password').val()
										}),
										processData : false,
										success : function(data, textStatus,
												jQxhr) {
											if (data.msg === 'authenticated') {
												window.location.href = "bar_graph.html"
											}
											else{
												
												alert(data.msg);
											}
										},
										error : function(jqXhr, textStatus,
												errorThrown) {
											console.log(errorThrown);
										}
									});
						});
	</script>
</body>
</html>